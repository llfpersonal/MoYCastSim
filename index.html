<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RO Renewal — VCT/FCT Calculator</title>
  <style>
    :root { --bg:#0b1020;--panel:#121933;--ink:#e8ecff;--muted:#95a0c7;--accent:#6aa3ff; }
    *{box-sizing:border-box}
    body{margin:0;font-family:ui-sans-serif,system-ui; background:var(--bg);color:var(--ink)}
    .wrap{max-width:1000px;margin:32px auto;padding:24px}
    header{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:8px}
    h1{font-size:24px;margin:0}
    .lang{display:flex;gap:8px}
    .lang button{appearance:none;border:1px solid rgba(255,255,255,0.2);background:transparent;color:var(--ink);padding:8px 10px;border-radius:8px;cursor:pointer}
    .lang button.active{background:linear-gradient(180deg,#5a8cff,#3b6cf1);border:0}

    p.sub{color:var(--muted);margin:8px 0 24px}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
    .card{grid-column:span 12;background:var(--panel);border-radius:16px;padding:16px;border:1px solid rgba(255,255,255,0.08)}
    @media(min-width:880px){.card.half{grid-column:span 6}}
    label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
    input{display:block;width:100%;padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.15);background:rgba(255,255,255,0.04);color:var(--ink);line-height:1.2}
    input:focus{outline:2px solid var(--accent);border-color:transparent}
    .row{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
    .row3{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
    button{appearance:none;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.06);color:var(--ink);padding:10px 16px;border-radius:8px;cursor:pointer}
    button.primary{background:linear-gradient(180deg,#5a8cff,#3b6cf1);border:0}
    .btns{display:flex;gap:10px;flex-wrap:wrap;margin-top:8px}
    .result{display:grid;grid-template-columns:repeat(12,1fr);gap:12px;margin-top:12px}
    .pill{grid-column:span 12;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.08);border-radius:12px;padding:12px}
    @media(min-width:880px){.pill{grid-column:span 6}}
    .stat{font-size:12px;color:var(--muted)}
    .big{font-size:26px;font-weight:700}
    .help{font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1 id="t_title">Ragnarok Renewal — Calculadora de Cast</h1>
      <div class="lang">
        <button id="l_es" class="active">ESP</button>
        <button id="l_en">ENG</button>
        <button id="l_pt">PR</button>
      </div>
    </header>

    <p class="sub" id="t_sub">Orden aplicado: VCT (Stats → % → Flat) y FCT (% → Flat). VCT por atributos usa ((DEX×2)+INT)/470.</p>

    <div class="grid">
      <div class="card half">
        <h3 id="t_sec1">1) Atributos</h3>
        <div class="row">
          <div>
            <label id="t_dex">DEX total</label>
            <input id="dex" type="number" value="120" inputmode="decimal">
          </div>
          <div>
            <label id="t_int">INT total</label>
            <input id="int" type="number" value="100" inputmode="decimal">
          </div>
        </div>
      </div>

      <div class="card half">
        <h3 id="t_sec2">2) Skill objetivo</h3>
        <div class="row">
          <div>
            <label id="t_vctBase">VCT base (s)</label>
            <input id="vctBase" type="number" step="0.01" value="3.5" inputmode="decimal">
          </div>
          <div>
            <label id="t_fctBase">FCT base (s)</label>
            <input id="fctBase" type="number" step="0.01" value="0.5" inputmode="decimal">
          </div>
        </div>
      </div>

      <div class="card half">
        <h3 id="t_sec3">3) Reducciones VCT</h3>
        <div class="row3">
          <div>
            <label id="t_vctPct">Reducción %</label>
            <input id="vctPct" type="number" step="0.1" value="70" inputmode="decimal">
          </div>
          <div>
            <label id="t_vctFlat">Reducción plana (s)</label>
            <input id="vctFlat" type="number" step="0.01" value="0.9" inputmode="decimal">
          </div>
        </div>
      </div>

      <div class="card half">
        <h3 id="t_sec4">4) Reducciones FCT</h3>
        <div class="row3">
          <div>
            <label id="t_fctPct">Reducción %</label>
            <input id="fctPct" type="number" step="0.1" value="50" inputmode="decimal">
          </div>
          <div>
            <label id="t_fctFlat">Reducción plana (s)</label>
            <input id="fctFlat" type="number" step="0.01" value="0.1" inputmode="decimal">
          </div>
        </div>
      </div>

      <div class="card">
        <div class="btns">
          <button class="primary" id="calcBtn">Calcular</button>
          <button id="resetBtn">Reset</button>
        </div>

        <div class="result" id="resultArea" hidden>
          <div class="pill">
            <div class="stat" id="t_vctStatsLbl">VCT tras atributos</div>
            <div class="big" id="vctStats">–</div>
            <div class="help" id="t_mulText">Multiplicador ((DEX×2)+INT)/470 → <span id="statMul">–</span></div>
          </div>
          <div class="pill">
            <div class="stat" id="t_vctFinalLbl">VCT final</div>
            <div class="big" id="vctFinal">–</div>
          </div>
          <div class="pill">
            <div class="stat" id="t_fctFinalLbl">FCT final</div>
            <div class="big" id="fctFinal">–</div>
          </div>
          <div class="pill">
            <div class="stat" id="t_totalLbl">Cast total (VCT + FCT)</div>
            <div class="big" id="totalCast">–</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const $=(id)=>document.getElementById(id);
    const parseNum=(el)=>{ const v=(el.value||"").replace(",","."); const n=parseFloat(v); return isNaN(n)?0:n; }
    const clamp0=(v)=>Math.max(0,v);
    const round=(v)=> (Math.round(v*1000)/1000).toFixed(3);

    // i18n strings
    const dict={
      es:{
        title:"Ragnarok Renewal — Calculadora de Cast",
        sub:"Orden aplicado: VCT (Stats → % → Flat) y FCT (% → Flat). VCT por atributos usa ((DEX×2)+INT)/470.",
        s1:"1) Atributos", dex:"DEX total", int:"INT total",
        s2:"2) Skill objetivo", vctBase:"VCT base (s)", fctBase:"FCT base (s)",
        s3:"3) Reducciones VCT", vctPct:"Reducción %", vctFlat:"Reducción plana (s)",
        s4:"4) Reducciones FCT", fctPct:"Reducción %", fctFlat:"Reducción plana (s)",
        calc:"Calcular", reset:"Reset",
        vctStatsLbl:"VCT tras atributos", mulText:"Multiplicador ((DEX×2)+INT)/470 → ", vctFinalLbl:"VCT final", fctFinalLbl:"FCT final", totalLbl:"Cast total (VCT + FCT)"
      },
      en:{
        title:"Ragnarok Renewal — Cast Calculator",
        sub:"Order: VCT (Stats → % → Flat) and FCT (% → Flat). Stat VCT uses ((DEX×2)+INT)/470.",
        s1:"1) Attributes", dex:"Total DEX", int:"Total INT",
        s2:"2) Target skill", vctBase:"Base VCT (s)", fctBase:"Base FCT (s)",
        s3:"3) VCT reductions", vctPct:"Percent reduction", vctFlat:"Flat reduction (s)",
        s4:"4) FCT reductions", fctPct:"Percent reduction", fctFlat:"Flat reduction (s)",
        calc:"Calculate", reset:"Reset",
        vctStatsLbl:"VCT after stats", mulText:"Multiplier ((DEX×2)+INT)/470 → ", vctFinalLbl:"Final VCT", fctFinalLbl:"Final FCT", totalLbl:"Total cast (VCT + FCT)"
      },
      pt:{
        title:"Ragnarok Renewal — Calculadora de Cast",
        sub:"Ordem: VCT (Atributos → % → Flat) e FCT (% → Flat). O VCT de atributos usa ((DEX×2)+INT)/470.",
        s1:"1) Atributos", dex:"DEX total", int:"INT total",
        s2:"2) Habilidade alvo", vctBase:"VCT base (s)", fctBase:"FCT base (s)",
        s3:"3) Reduções de VCT", vctPct:"Redução %", vctFlat:"Redução fixa (s)",
        s4:"4) Reduções de FCT", fctPct:"Redução %", fctFlat:"Redução fixa (s)",
        calc:"Calcular", reset:"Reset",
        vctStatsLbl:"VCT após atributos", mulText:"Multiplicador ((DEX×2)+INT)/470 → ", vctFinalLbl:"VCT final", fctFinalLbl:"FCT final", totalLbl:"Cast total (VCT + FCT)"
      }
    };

    function setLang(lang){
      const t=dict[lang]; if(!t) return;
      $("t_title").textContent=t.title; $("t_sub").textContent=t.sub;
      $("t_sec1").textContent=t.s1; $("t_dex").textContent=t.dex; $("t_int").textContent=t.int;
      $("t_sec2").textContent=t.s2; $("t_vctBase").textContent=t.vctBase; $("t_fctBase").textContent=t.fctBase;
      $("t_sec3").textContent=t.s3; $("t_vctPct").textContent=t.vctPct; $("t_vctFlat").textContent=t.vctFlat;
      $("t_sec4").textContent=t.s4; $("t_fctPct").textContent=t.fctPct; $("t_fctFlat").textContent=t.fctFlat;
      $("calcBtn").textContent=t.calc; $("resetBtn").textContent=t.reset;
      $("t_vctStatsLbl").textContent=t.vctStatsLbl; $("t_mulText").childNodes[0].nodeValue=t.mulText; $("t_vctFinalLbl").textContent=t.vctFinalLbl; $("t_fctFinalLbl").textContent=t.fctFinalLbl; $("t_totalLbl").textContent=t.totalLbl;
      ["l_es","l_en","l_pt"].forEach(id=>$(id).classList.remove("active"));
      if(lang==='es') $("l_es").classList.add("active");
      if(lang==='en') $("l_en").classList.add("active");
      if(lang==='pt') $("l_pt").classList.add("active");
      document.documentElement.lang = (lang==='pt'?'pt':lang);
    }

    function compute(){
      const dex=parseNum($("dex")); const intt=parseNum($("int"));
      const vctBase=parseNum($("vctBase")); const fctBase=parseNum($("fctBase"));
      const vctPct=Math.min(100,Math.max(0,parseNum($("vctPct"))))/100;
      const vctFlat=parseNum($("vctFlat"));
      const fctPct=Math.min(100,Math.max(0,parseNum($("fctPct"))))/100;
      const fctFlat=parseNum($("fctFlat"));

      const statMul=((dex*2)+intt)/470;
      const vctAfterStats=vctBase*statMul;
      const vctAfterPct=vctAfterStats*(1-vctPct);
      const vctFinal=clamp0(vctAfterPct - vctFlat);
      const fctAfterPct=fctBase*(1-fctPct);
      const fctFinal=clamp0(fctAfterPct - fctFlat);
      const total=vctFinal+fctFinal;

      $("statMul").textContent=round(statMul);
      $("vctStats").textContent=round(vctAfterStats)+" s";
      $("vctFinal").textContent=round(vctFinal)+" s";
      $("fctFinal").textContent=round(fctFinal)+" s";
      $("totalCast").textContent=round(total)+" s";
      $("resultArea").hidden=false;
    }

    $("calcBtn").addEventListener("click",compute);
    $("resetBtn").addEventListener("click",()=>location.reload());
    $("l_es").addEventListener("click",()=>setLang('es'));
    $("l_en").addEventListener("click",()=>setLang('en'));
    $("l_pt").addEventListener("click",()=>setLang('pt'));

    // init
    setLang('es');
  </script>
</body>
</html>
